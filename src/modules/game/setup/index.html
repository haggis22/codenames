<div ng-controller="codenames.game.SetupCtrl" class="panel-game-setup">

    <div class="folder-tabs">
        <div class="tab" ng-show="viewService.game.isPlaying(viewService.session.username)" ng-class="{ 'active': viewService.tabs.setup == viewConstants.TABS.SETUP.ROLES}">
            <a ng-click="selectTab(viewConstants.TABS.SETUP.ROLES)" 
                title="Choose your team (RED or BLUE) and then your role">Pick a team</a>
        </div>
        <div class="tab" ng-show="isOwner()" ng-class="{ 'active': viewService.tabs.setup == viewConstants.TABS.SETUP.INVITE }">
            <a ng-click="selectTab(viewConstants.TABS.SETUP.INVITE)"
                title="Invite other users to join your game">Invite more players</a>
        </div>
    </div>

    <div class="folder">

        <div ng-show="viewService.tabs.setup == viewConstants.TABS.SETUP.INVITE" class="folder-invitations">

            <div class="inviter">
        
                <form name="inviteForm" novalidate>

                    <div class="div-form">
                        <div class="header">
                            Invite players
                        </div><!-- header -->
                        <div class="form-row">
                            <div class="label">
                                Username:
                            </div><!-- label -->
                            <div class="field">
                                <input type="text" 
                                    class="username" 
                                    ng-class="{ 'field-error': viewService.invitation.submitted && inviteForm.username.$invalid }"
                                    name="username" 
                                    ng-model="viewService.invitation.username"
                                    required 
                                    h22-enter-action="invite()" />                            
                            </div><!-- field -->
                        </div>
                        <div class="buttons">
                            <button type="button" ng-click="invite()">Invite</button>
                        </div>

                    </div><!-- invitations div-form -->

                </form><!-- inviteForm -->

            </div><!-- inviter -->
            
            <div class="invitations">

                <div ng-hide="viewService.game.invitations.length" class="no-invitations">
                    There are no open invitations for this game.
                </div>
                
                <div ng-repeat="invitee in viewService.game.invitations" class="invitation">
                    {{ invitee }}
                </div><!-- invitee -->

            </div><!-- invitations -->


        </div><!-- INVITE -->

        <div ng-show="viewService.tabs.setup == viewConstants.TABS.SETUP.ROLES" class="roles">

            <table class="role-table" cellpadding="5" cellspacing="0" border="1">
        
                <thead>
                    <tr>
                        <th class="role">Role</th>
                        <th class="red">RED</th>
                        <th class="blue">BLUE</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="spymaster">
                        <td class="role">Spymaster</td>
                        <td class="spymaster red">
                            <div ng-hide="findSpymaster(Team.RED)"><button type="button" ng-click="apply(Team.RED, Team.ROLES.SPYMASTER)">Choose</button></div>
                            <div class="players">
                                <div class="spymaster" ng-show="findSpymaster(Team.RED)">{{ findSpymaster(Team.RED).username }}</div>
                                <div class="spymaster" ng-hide="findSpymaster(Team.RED)">CPU</div>
                            </div><!-- players -->
                        </td>
                        <td class="spymaster blue">
                            <div ng-hide="findSpymaster(Team.BLUE)"><button type="button" ng-click="apply(Team.BLUE, Team.ROLES.SPYMASTER)">Choose</button></div>
                            <div class="players">
                                <div class="spymaster" ng-show="findSpymaster(Team.BLUE)">{{ findSpymaster(Team.BLUE).username }}</div>
                                <div class="spymaster" ng-hide="findSpymaster(Team.BLUE)">CPU</div>
                            </div><!-- players -->
                        </td>
                    </tr>
                    <tr class="team">
                        <td class="role">Spies</td>
                        <td class="spy red">
                            <div><button type="button" ng-click="apply(Team.RED, Team.ROLES.SPY)">Choose</button></div>
                            <div class="players">
                                <div ng-show="findSpies(Team.RED).length == 0">
                                    <div class="spy">CPU</div>
                                </div>
                                <div ng-show="findSpies(Team.RED).length > 0">
                                    <div class="spy" ng-repeat="spy in findSpies(Team.RED)">{{ spy.username }}</div>
                                </div>
                            </div><!-- players -->
                        </td>
                        <td class="spy blue">
                            <div><button type="button" ng-click="apply(Team.BLUE, Team.ROLES.SPY)">Choose</button></div>
                            <div class="players">
                                <div ng-show="findSpies(Team.BLUE).length > 0">
                                    <div class="spy" ng-repeat="spy in findSpies(Team.BLUE)">{{ spy.username }}</div>
                                </div>
                                <div ng-show="findSpies(Team.BLUE).length == 0">
                                    <div class="spy">CPU</div>
                                </div>
                            </div><!-- players -->
                        </td>
                    </tr>
                </tbody>
            </table><!-- role-table -->

        </div><!-- roles -->



    </div><!-- folder -->


    <div class="invitee-panels" ng-show="viewService.game.isInvited(viewService.session.username)">
        
        <button type="button" ng-click="acceptInvitation()">Accept Invitation</button>

    </div>


    <div class="buttons">
        <button type="button" class="start" ng-click="startGame()">Start the game!</button>
    </div><!-- buttons -->

</div>
